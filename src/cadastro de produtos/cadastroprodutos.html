<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Cadastro de Produtos</title>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <a class="navbar-brand" href="#">
            <img src="img/img-ecocel.jpg" alt="Logo" class="logo">
        </a>
        <ul class="navbar-links">
            <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Dispositivos</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Sustentabilidade</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Contato</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Reviews</a></li>
        </ul>
        <div class="navbar-buttons">
            <a class="btn btn-light login-btn" href="#">Login</a>
            <a class="btn btn-dark register-btn" href="#">Cadastro</a>
        </div>
    </nav>

    <!-- Formulário de Cadastro -->
    <div class="container mt-5" id="produtos">
        <h2>Cadastro</h2>
        <form id="form-produto">
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="productid">ID</label>
                    <input type="number" class="form-control" id="productid" placeholder="ID do produto">
                </div>
                <div class="form-group col-md-6">
                    <label for="productname">Nome</label>
                    <input type="text" class="form-control" id="productname" placeholder="Nome do produto">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="productano">Ano</label>
                    <input type="number" class="form-control" id="productano" placeholder="Ano do produto">
                </div>
                <div class="form-group col-md-6">
                    <label for="productcam">Câmera</label>
                    <input type="text" class="form-control" id="productcam" placeholder="Pixels da câmera">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="productbat">Bateria</label>
                    <input type="text" class="form-control" id="productbat" placeholder="Durabilidade da bateria">
                </div>
                <div class="form-group col-md-6">
                    <label for="productso">Sistema operacional:</label>
                    <select class="form-control" id="productso">
                        <option>Android</option>
                        <option>iOS</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="productarm">Armazenamento</label>
                    <input type="text" class="form-control" id="productarm" placeholder="Armazenamento do produto">
                </div>
                <div class="form-group col-md-6">
                    <label for="productmark">Marca</label>
                    <input type="text" class="form-control" id="productmark" placeholder="Marca do produto">
                </div>
            </div>
            <div class="form-group">
                <label for="productimg">Imagem do Produto</label>
                <input type="file" class="form-control-file" id="productimg" accept="image/*">
            </div>
            <button type="button" class="btn btn-dark" id="cadastrar">Cadastrar</button>
        </form>
    </div>

    <!-- Tabela de Produtos -->
    <div class="container mt-5">
        <h2>Produtos Cadastrados</h2>
        <table class="table table-bordered" id="tabela-produtos">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Ano</th>
                    <th>Câmera</th>
                    <th>Bateria</th>
                    <th>Sistema Operacional</th>
                    <th>Armazenamento</th>
                    <th>Marca</th>
                    <th>Imagem</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!-- Rodapé -->
    <footer class="footer mt-5" style="background-color: #3CB371;">
        <div class="container py-3">
            <a class="footer-brand" href="#"><img src="img/ig-removebg-preview.png" alt="Instagram"></a>
            <a class="footer-brand" href="#"><img src="img/yt-removebg-preview.png" alt="Youtube"></a>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        const LIMITE_PRODUTOS = 5;
        let produtos = [];

        function carregarProdutos() {
            const produtosSalvos = JSON.parse(localStorage.getItem('produtos'));
            if (produtosSalvos) {
                produtos = produtosSalvos;
            }
            exibirProdutos();
        }

        carregarProdutos();

        function exibirProdutos() {
            const tabela = document.querySelector('#tabela-produtos tbody');
            tabela.innerHTML = '';
            produtos.slice(0, LIMITE_PRODUTOS).forEach(produto => {
                const linha = document.createElement('tr');
                linha.innerHTML = `
                    <td>${produto.id}</td>
                    <td>${produto.nome}</td>
                    <td>${produto.ano}</td>
                    <td>${produto.camera}</td>
                    <td>${produto.bateria}</td>
                    <td>${produto.sistema_operacional}</td>
                    <td>${produto.armazenamento}</td>
                    <td>${produto.marca}</td>
                    <td><img src="${produto.imagem || 'img/default.png'}" alt="${produto.nome}" class="img-thumbnail" style="max-width: 100px;"></td>
                `;
                tabela.appendChild(linha);
            });
        }

        document.getElementById('cadastrar').addEventListener('click', () => {
            const id = document.getElementById('productid').value;
            const nome = document.getElementById('productname').value;
            const ano = document.getElementById('productano').value;
            const camera = document.getElementById('productcam').value;
            const bateria = document.getElementById('productbat').value;
            const sistema = document.getElementById('productso').value;
            const armazenamento = document.getElementById('productarm').value;
            const marca = document.getElementById('productmark').value;

            if (!id || !nome || !ano || !camera || !bateria || !armazenamento || !marca) {
                alert('Por favor, preencha todos os campos.');
                return;
            }

            if (produtos.some(produto => produto.id === parseInt(id))) {
                alert('ID já existe!');
                return;
            }

            const imagemInput = document.getElementById('productimg');
            const imagem = imagemInput.files[0]
                ? URL.createObjectURL(imagemInput.files[0])
                : 'img/default.png';

            const novoProduto = {
                id: parseInt(id),
                nome,
                ano,
                camera,
                bateria,
                sistema_operacional: sistema,
                armazenamento,
                marca,
                imagem
            };

            // Substituir produtos mais antigos ao atingir o limite
            if (produtos.length >= LIMITE_PRODUTOS) {
                produtos.shift(); // Remove o mais antigo
            }

            produtos.push(novoProduto);
            localStorage.setItem('produtos', JSON.stringify(produtos));
            exibirProdutos();
            document.getElementById('form-produto').reset();
        });
    </script>
</body>
</html>
